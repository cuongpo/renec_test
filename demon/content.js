"use strict";(()=>{var O={SEND_TRANSACTION:"send-transaction",SIGN_TRANSACTION:"sign-transaction",SIGN_TRANSACTIONS:"sign-transactions",SIGN_MESSAGE:"sign-message"},g={...O,CONNECT:"connect"};var E="demon-channel-solana-content-script-request",_="demon-channel-solana-content-script-response";var u="demon-channel-solana-webpage-request",l="demon-channel-solana-webpage-response",A="demon-channel-notification",T="demon-channel-content-script";var m="demon-get-extension-id";var N="demon-get-dapp-connected";var i=class{_responseResolvers={};_requestId=1;_requestChannel;_responseChannel;constructor(e,n){this._requestChannel=e,this._responseChannel=n,this._requestId=0,this._responseResolvers={},this._initChannels()}_initChannels(){document.addEventListener(this._responseChannel,this._handleRpcResponse.bind(this))}_handleRpcResponse(e){let{id:n,result:t,error:r}=e.detail,o=this._responseResolvers[n];if(!o)throw console.error("unexpected event",e),new Error("unexpected event");delete this._responseResolvers[n];let[c,R]=o;r?R(new Error(r)):c(t)}_addResponseResolver(e){let n,t,r=new Promise((o,c)=>{n=o,t=c});return this._responseResolvers[e]=[n,t],[r,n,t]}async request({method:e,params:n}){let t=this._requestId;this._requestId+=1;let[r]=this._addResponseResolver(t),o={id:t,method:e,params:n},c=new CustomEvent(this._requestChannel,{detail:o});return document.dispatchEvent(c),await r}static async sendResponse(e,n){let t=new CustomEvent(e,{detail:n});document.dispatchEvent(t)}static subscribeRequest(e,n){document.addEventListener(e,t=>{n(t.detail)})}};var p=class{static sendMessageToExtensionFromWebpage(e,n,t){chrome.runtime.sendMessage(e,n,t)}static sendMessageToAnywhereInExtension(e,n){chrome.runtime.sendMessage(e,n)}static addEventListenerFromAnywhereInExtension(e){return chrome.runtime.onMessage.addListener(e)}static addEventListenerFromWebpage(e){return chrome.runtime.onMessageExternal.addListener(e)}static async getLastFocusedWindow(){return new Promise(e=>{chrome.windows.getLastFocused(e)})}static closeWindow(e){e!==void 0&&chrome.windows.remove(e)}};var d=class{static proxyReverse(e,n){n&&window.addEventListener("message",t=>{t.data.type===n&&p.sendMessageToAnywhereInExtension({channel:n,data:t.data.detail})}),p.addEventListenerFromAnywhereInExtension((t,r,o)=>{t.channel===e&&(o({result:"success"}),window.postMessage({type:e,detail:t.data},"*"))})}};var S=new i(u,l);function C(){h("inpage.js"),L(),y()}function h(s){try{let e=document.createElement("script");e.src=chrome.runtime.getURL(s),e.onload=function(){e.remove()},(document.head||document.documentElement).appendChild(e)}catch(e){console.error("provider injection failed.",e)}}function L(){i.subscribeRequest(E,x),chrome.runtime.onMessage.addListener(async(s,e,n)=>{s.channel===T&&s.data?.name===N&&n(await I())})}async function I(){return await S.request({method:N})}function x(s){switch(s.method){case m:i.sendResponse(_,{id:s.id,result:chrome.runtime.id});break;default:break}}function y(){d.proxyReverse(A)}C();})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2V4dGVuc2lvbi9saWIvY29tbW9uL3R5cGVzLnRzIiwgIi4uL3NyYy9leHRlbnNpb24vbGliL2NvbW1vbi9jb25zdGFudHMudHMiLCAiLi4vc3JjL2V4dGVuc2lvbi9saWIvcmVxdWVzdC93ZWJwYWdlLWNvbnRlbnRzY3JpcHQtcmVxdWVzdC1tYW5hZ2VyLnRzIiwgIi4uL3NyYy9leHRlbnNpb24vbGliL2Jyb3dzZXItcnVudGltZS50cyIsICIuLi9zcmMvZXh0ZW5zaW9uL2luamVjdHMvY29tbW9uL2NoYW5uZWwtY29udGVudC1zY3JpcHQudHMiLCAiLi4vc3JjL2V4dGVuc2lvbi9pbmplY3RzL2NvbnRlbnQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCB0eXBlIFJwY1JlcXVlc3QgPSB7XG4gIGlkPzogbnVtYmVyO1xuICBtZXRob2Q6IHN0cmluZztcbiAgcGFyYW1zPzogYW55W107XG59O1xuZXhwb3J0IHR5cGUgRXZlbnQgPSBhbnk7XG5leHBvcnQgdHlwZSBSZXNwb25zZUhhbmRsZXIgPSBbYW55LCBhbnldO1xuZXhwb3J0IHR5cGUgUnBjUmVzcG9uc2U8VCA9IGFueT4gPSBUO1xuZXhwb3J0IGludGVyZmFjZSBScGNSZXF1ZXN0UmVzdWx0IHtcbiAgaWQ6IG51bWJlcjtcbiAgcmVzdWx0PzogYW55O1xuICBlcnJvcj86IGFueTtcbn1cblxuZXhwb3J0IGNvbnN0IFBvcHVwVHlwZSA9IHtcbiAgU0VORF9UUkFOU0FDVElPTjogXCJzZW5kLXRyYW5zYWN0aW9uXCIsXG4gIFNJR05fVFJBTlNBQ1RJT046IFwic2lnbi10cmFuc2FjdGlvblwiLFxuICBTSUdOX1RSQU5TQUNUSU9OUzogXCJzaWduLXRyYW5zYWN0aW9uc1wiLFxuICBTSUdOX01FU1NBR0U6IFwic2lnbi1tZXNzYWdlXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgQ2xvc2VQb3B1cFR5cGUgPSB7XG4gIC4uLlBvcHVwVHlwZSxcbiAgQ09OTkVDVDogXCJjb25uZWN0XCIsXG59IGFzIGNvbnN0O1xuXG50eXBlIFZhbHVlT2Y8VD4gPSBUW2tleW9mIFRdO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZWRlY2xhcmVcbmV4cG9ydCB0eXBlIFBvcHVwVHlwZSA9IFZhbHVlT2Y8dHlwZW9mIFBvcHVwVHlwZT47XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlZGVjbGFyZVxuZXhwb3J0IHR5cGUgQ2xvc2VQb3B1cFR5cGUgPSBWYWx1ZU9mPHR5cGVvZiBDbG9zZVBvcHVwVHlwZT47XG4iLCAiLy8gQ29udGVudCBzY3JpcHQgY2hhbm5lbHNcbmV4cG9ydCBjb25zdCBDSEFOTkVMX1NPTEFOQV9DT05URU5UX1NDUklQVF9SRVFVRVNUID0gXCJkZW1vbi1jaGFubmVsLXNvbGFuYS1jb250ZW50LXNjcmlwdC1yZXF1ZXN0XCI7XG5leHBvcnQgY29uc3QgQ0hBTk5FTF9TT0xBTkFfQ09OVEVOVF9TQ1JJUFRfUkVTUE9OU0UgPVxuICBcImRlbW9uLWNoYW5uZWwtc29sYW5hLWNvbnRlbnQtc2NyaXB0LXJlc3BvbnNlXCI7XG5leHBvcnQgY29uc3QgQ0hBTk5FTF9QT1BVUF9SRVNQT05TRSA9IFwiZGVtb24tY2hhbm5lbC1wb3B1cC1yZXNwb25zZVwiO1xuZXhwb3J0IGNvbnN0IENIQU5ORUxfU09MQU5BX1dFQlBBR0VfUkVRVUVTVCA9IFwiZGVtb24tY2hhbm5lbC1zb2xhbmEtd2VicGFnZS1yZXF1ZXN0XCI7XG5leHBvcnQgY29uc3QgQ0hBTk5FTF9TT0xBTkFfV0VCUEFHRV9SRVNQT05TRSA9IFwiZGVtb24tY2hhbm5lbC1zb2xhbmEtd2VicGFnZS1yZXNwb25zZVwiO1xuZXhwb3J0IGNvbnN0IENIQU5ORUxfU09MQU5BX05PVElGSUNBVElPTiA9IFwiZGVtb24tY2hhbm5lbC1ub3RpZmljYXRpb25cIjtcbmV4cG9ydCBjb25zdCBDSEFOTkVMX0NPTlRFTlRfU0NSSVBUID0gXCJkZW1vbi1jaGFubmVsLWNvbnRlbnQtc2NyaXB0XCI7XG5leHBvcnQgY29uc3QgQ0hBTk5FTF9XT1JLRVIgPSBcImRlbW9uLWNoYW5uZWwtd29ya2VyXCI7XG5cbi8vIE5vdGlmaWNhdGlvblxuZXhwb3J0IGNvbnN0IE5PVElGSUNBVElPTl9TT0xBTkFfQ09OTkVDVElPTl9VUkxfVVBEQVRFRCA9XG4gIFwiZGVtb24tbm90aWZpY2F0aW9uLXNvbGFuYS1jb25uZWN0aW9uLXVybC11cGRhdGVkXCI7XG5leHBvcnQgY29uc3QgTk9USUZJQ0FUSU9OX1NPTEFOQV9BQ1RJVkVfV0FMTEVUX1VQREFURUQgPSBcImRlbW9uLW5vdGlmaWNhdGlvbi1hY3RpdmUtd2FsbGV0LXVwZGF0ZWRcIjtcblxuLy9cbi8vIFNvbGFuYSB3ZWIgaW5qZWN0ZWQgcHJvdmlkZXIgQVBJLlxuLy9cbmV4cG9ydCBjb25zdCBTT0xBTkFfQ0hBTk5FTCA9IFwiZGVtb24tc29sYW5hLWNoYW5uZWxcIjtcbmV4cG9ydCBjb25zdCBTT0xBTkFfTUVUSE9EX0NPTk5FQ1QgPSBcImRlbW9uLXNvbGFuYS1jb25uZWN0XCI7XG5leHBvcnQgY29uc3QgU09MQU5BX01FVEhPRF9ESVNDT05ORUNUID0gXCJkZW1vbi1zb2xhbmEtZGlzY29ubmVjdFwiO1xuZXhwb3J0IGNvbnN0IFNPTEFOQV9NRVRIT0RfU0VORF9UUkFOU0FDVElPTiA9IFwiZGVtb24tc29sYW5hLXNlbmQtdHJhbnNhY3Rpb25cIjtcbmV4cG9ydCBjb25zdCBTT0xBTkFfTUVUSE9EX1NJR05fVFJBTlNBQ1RJT04gPSBcImRlbW9uLXNvbGFuYS1zaWduLXRyYW5zYWN0aW9uXCI7XG5leHBvcnQgY29uc3QgU09MQU5BX01FVEhPRF9TSUdOX1RSQU5TQUNUSU9OUyA9IFwiZGVtb24tc29sYW5hLXNpZ24tdHJhbnNhY3Rpb25zXCI7XG5leHBvcnQgY29uc3QgU09MQU5BX01FVEhPRF9TSUdOX01FU1NBR0UgPSBcImRlbW9uLXNvbGFuYS1zaWduLW1lc3NhZ2VcIjtcbmV4cG9ydCBjb25zdCBTT0xBTkFfTUVUSE9EX0NMT1NFX1dJTkRPVyA9IFwiZGVtb24tc29sYW5hLWNsb3NlLXdpbmRvd1wiO1xuZXhwb3J0IGNvbnN0IFNPTEFOQV9NRVRIT0RfSVNfV0FMTEVUX0NPTk5FQ1RFRCA9IFwiZGVtb24tc29sYW5hLWlzLXdhbGxldC1jb25uZWN0ZWRcIjtcblxuLy8gV2VicGFnZSB0byBjb250ZW50IHNjcmlwdCBldmVudFxuZXhwb3J0IGNvbnN0IEdFVF9FWFRFTlNJT05fSUQgPSBcImRlbW9uLWdldC1leHRlbnNpb24taWRcIjtcbmV4cG9ydCBjb25zdCBHRVRfRVhURU5TSU9OX0lEX0xJU1RFTkVSID0gXCJkZW1vbi1nZXQtZXh0ZW5zaW9uLWlkLWxpc3RlbmVyXCI7XG5leHBvcnQgY29uc3QgR0VUX0RBUFBfQ09OTkVDVEVEID0gXCJkZW1vbi1nZXQtZGFwcC1jb25uZWN0ZWRcIjtcbiIsICJpbXBvcnQgeyBFdmVudCwgUmVzcG9uc2VIYW5kbGVyLCBScGNSZXF1ZXN0LCBScGNSZXF1ZXN0UmVzdWx0LCBScGNSZXNwb25zZSB9IGZyb20gXCIuLi9jb21tb25cIjtcblxuZXhwb3J0IGNsYXNzIFdlYnBhZ2VUb0NvbnRlbnRTY3JpcHRSZXF1ZXN0TWFuYWdlciB7XG4gIHByaXZhdGUgX3Jlc3BvbnNlUmVzb2x2ZXJzOiB7IFtyZXF1ZXN0SWQ6IG51bWJlcl06IFJlc3BvbnNlSGFuZGxlciB9ID0ge307XG4gIHByaXZhdGUgX3JlcXVlc3RJZCA9IDE7XG4gIHByaXZhdGUgX3JlcXVlc3RDaGFubmVsOiBzdHJpbmc7XG4gIHByaXZhdGUgX3Jlc3BvbnNlQ2hhbm5lbDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHJlcXVlc3RDaGFubmVsOiBzdHJpbmcsIHJlc3BvbnNlQ2hhbm5lbDogc3RyaW5nKSB7XG4gICAgdGhpcy5fcmVxdWVzdENoYW5uZWwgPSByZXF1ZXN0Q2hhbm5lbDtcbiAgICB0aGlzLl9yZXNwb25zZUNoYW5uZWwgPSByZXNwb25zZUNoYW5uZWw7XG4gICAgdGhpcy5fcmVxdWVzdElkID0gMDtcbiAgICB0aGlzLl9yZXNwb25zZVJlc29sdmVycyA9IHt9O1xuICAgIHRoaXMuX2luaXRDaGFubmVscygpO1xuICB9XG5cbiAgX2luaXRDaGFubmVscygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuX3Jlc3BvbnNlQ2hhbm5lbCwgdGhpcy5faGFuZGxlUnBjUmVzcG9uc2UuYmluZCh0aGlzKSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVScGNSZXNwb25zZShldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCB7IGlkLCByZXN1bHQsIGVycm9yIH0gPSBldmVudC5kZXRhaWwgYXMgUnBjUmVxdWVzdFJlc3VsdDtcbiAgICBjb25zdCByZXNvbHZlciA9IHRoaXMuX3Jlc3BvbnNlUmVzb2x2ZXJzW2lkXTtcbiAgICBpZiAoIXJlc29sdmVyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwidW5leHBlY3RlZCBldmVudFwiLCBldmVudCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmV4cGVjdGVkIGV2ZW50XCIpO1xuICAgIH1cbiAgICBkZWxldGUgdGhpcy5fcmVzcG9uc2VSZXNvbHZlcnNbaWRdO1xuICAgIGNvbnN0IFtyZXNvbHZlLCByZWplY3RdID0gcmVzb2x2ZXI7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKGVycm9yKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9hZGRSZXNwb25zZVJlc29sdmVyKHJlcXVlc3RJZDogbnVtYmVyKSB7XG4gICAgbGV0IHJlc29sdmUsIHJlamVjdDtcbiAgICBjb25zdCBwcm9tID0gbmV3IFByb21pc2UoKF9yZXNvbHZlLCBfcmVqZWN0KSA9PiB7XG4gICAgICByZXNvbHZlID0gX3Jlc29sdmU7XG4gICAgICByZWplY3QgPSBfcmVqZWN0O1xuICAgIH0pO1xuICAgIHRoaXMuX3Jlc3BvbnNlUmVzb2x2ZXJzW3JlcXVlc3RJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTtcbiAgICByZXR1cm4gW3Byb20sIHJlc29sdmUsIHJlamVjdF07XG4gIH1cblxuICAvLyBTZW5kcyBhIHJlcXVlc3QgZnJvbSB0aGlzIHNjcmlwdCB0byB0aGUgY29udGVudCBzY3JpcHQgYWNyb3NzIHRoZVxuICBwdWJsaWMgYXN5bmMgcmVxdWVzdDxUID0gYW55Pih7IG1ldGhvZCwgcGFyYW1zIH06IFJwY1JlcXVlc3QpOiBQcm9taXNlPFJwY1Jlc3BvbnNlPFQ+PiB7XG4gICAgY29uc3QgaWQgPSB0aGlzLl9yZXF1ZXN0SWQ7XG4gICAgdGhpcy5fcmVxdWVzdElkICs9IDE7XG5cbiAgICBjb25zdCBbcHJvbWlzZV0gPSB0aGlzLl9hZGRSZXNwb25zZVJlc29sdmVyKGlkKTtcblxuICAgIGNvbnN0IGRldGFpbDogUnBjUmVxdWVzdCA9IHtcbiAgICAgIGlkLFxuICAgICAgbWV0aG9kLFxuICAgICAgcGFyYW1zLFxuICAgIH07XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodGhpcy5fcmVxdWVzdENoYW5uZWwsIHtcbiAgICAgIGRldGFpbCxcbiAgICB9KTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICByZXR1cm4gKGF3YWl0IHByb21pc2UpIGFzIFQ7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2VuZFJlc3BvbnNlKHJlc3BvbnNlQ2hhbm5lbDogc3RyaW5nLCBkZXRhaWw6IFJwY1JlcXVlc3RSZXN1bHQpIHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChyZXNwb25zZUNoYW5uZWwsIHtcbiAgICAgIGRldGFpbCxcbiAgICB9KTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIHN0YXRpYyBzdWJzY3JpYmVSZXF1ZXN0KHJlcXVlc3RDaGFubmVsOiBzdHJpbmcsIGNiOiAoZGV0YWlsOiBScGNSZXF1ZXN0KSA9PiB2b2lkKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihyZXF1ZXN0Q2hhbm5lbCwgKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgY2IoZXZlbnQuZGV0YWlsIGFzIFJwY1JlcXVlc3QpO1xuICAgIH0pO1xuICB9XG59XG4iLCAiZXhwb3J0IGNsYXNzIEJyb3dzZXJSdW50aW1lIHtcbiAgcHVibGljIHN0YXRpYyBzZW5kTWVzc2FnZVRvRXh0ZW5zaW9uRnJvbVdlYnBhZ2UoZXh0ZW5zaW9uSWQ6IHN0cmluZywgb3B0aW9uczogYW55LCBjYjogYW55KSB7XG4gICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoZXh0ZW5zaW9uSWQsIG9wdGlvbnMsIGNiKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgc2VuZE1lc3NhZ2VUb0FueXdoZXJlSW5FeHRlbnNpb24obXNnOiBhbnksIGNiPzogYW55KSB7XG4gICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UobXNnLCBjYik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFkZEV2ZW50TGlzdGVuZXJGcm9tQW55d2hlcmVJbkV4dGVuc2lvbihsaXN0ZW5lcjogYW55KTogdm9pZCB7XG4gICAgcmV0dXJuIGNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFkZEV2ZW50TGlzdGVuZXJGcm9tV2VicGFnZShsaXN0ZW5lcjogYW55KTogdm9pZCB7XG4gICAgcmV0dXJuIGNocm9tZS5ydW50aW1lLm9uTWVzc2FnZUV4dGVybmFsLmFkZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0TGFzdEZvY3VzZWRXaW5kb3coKTogUHJvbWlzZTxjaHJvbWUud2luZG93cy5XaW5kb3c+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGNocm9tZS53aW5kb3dzLmdldExhc3RGb2N1c2VkKHJlc29sdmUpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjbG9zZVdpbmRvdyhpZD86IG51bWJlcikge1xuICAgIGlmIChpZCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgY2hyb21lLndpbmRvd3MucmVtb3ZlKGlkKTtcbiAgfVxufVxuIiwgIi8vIENoYW5uZWwgaXMgYSBjbGFzcyB0aGF0IGVzdGFibGlzaGVzIGNvbW11bmljYXRpb24gY2hhbm5lbCBmcm9tIGFcblxuaW1wb3J0IHsgQnJvd3NlclJ1bnRpbWUgfSBmcm9tIFwiLi4vLi4vbGliL2Jyb3dzZXItcnVudGltZVwiO1xuXG4vLyBjb250ZW50L2luamVjdGVkIHNjcmlwdCB0byBhIGJhY2tncm91bmQgc2NyaXB0LlxuZXhwb3J0IGNsYXNzIENoYW5uZWxDb250ZW50U2NyaXB0IHtcbiAgLy8gRm9yd2FyZHMgYWxsIG1lc3NhZ2VzIGZyb20gdGhlIGJhY2tncm91bmQgc2NyaXB0IHRvIHRoZSBjbGllbnQuXG4gIHB1YmxpYyBzdGF0aWMgcHJveHlSZXZlcnNlKHJlcUNoYW5uZWw6IHN0cmluZywgcmVzcENoYW5uZWw/OiBzdHJpbmcpIHtcbiAgICBpZiAocmVzcENoYW5uZWwpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSAhPT0gcmVzcENoYW5uZWwpIHJldHVybjtcblxuICAgICAgICBCcm93c2VyUnVudGltZS5zZW5kTWVzc2FnZVRvQW55d2hlcmVJbkV4dGVuc2lvbih7XG4gICAgICAgICAgY2hhbm5lbDogcmVzcENoYW5uZWwsXG4gICAgICAgICAgZGF0YTogZXZlbnQuZGF0YS5kZXRhaWwsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIEJyb3dzZXJSdW50aW1lLmFkZEV2ZW50TGlzdGVuZXJGcm9tQW55d2hlcmVJbkV4dGVuc2lvbihcbiAgICAgIChtZXNzYWdlOiBhbnksIF9zZW5kZXI6IGFueSwgc2VuZFJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2hhbm5lbCA9PT0gcmVxQ2hhbm5lbCkge1xuICAgICAgICAgIHNlbmRSZXNwb25zZSh7IHJlc3VsdDogXCJzdWNjZXNzXCIgfSk7XG4gICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsgdHlwZTogcmVxQ2hhbm5lbCwgZGV0YWlsOiBtZXNzYWdlLmRhdGEgfSwgXCIqXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIENIQU5ORUxfQ09OVEVOVF9TQ1JJUFQsXG4gIENIQU5ORUxfU09MQU5BX0NPTlRFTlRfU0NSSVBUX1JFUVVFU1QsXG4gIENIQU5ORUxfU09MQU5BX0NPTlRFTlRfU0NSSVBUX1JFU1BPTlNFLFxuICBDSEFOTkVMX1NPTEFOQV9OT1RJRklDQVRJT04sXG4gIENIQU5ORUxfU09MQU5BX1dFQlBBR0VfUkVRVUVTVCxcbiAgQ0hBTk5FTF9TT0xBTkFfV0VCUEFHRV9SRVNQT05TRSxcbiAgR0VUX0RBUFBfQ09OTkVDVEVELFxuICBHRVRfRVhURU5TSU9OX0lELFxuICBScGNSZXF1ZXN0LFxufSBmcm9tIFwiLi4vbGliL2NvbW1vblwiO1xuaW1wb3J0IHsgV2VicGFnZVRvQ29udGVudFNjcmlwdFJlcXVlc3RNYW5hZ2VyIH0gZnJvbSBcIi4uL2xpYi9yZXF1ZXN0L3dlYnBhZ2UtY29udGVudHNjcmlwdC1yZXF1ZXN0LW1hbmFnZXJcIjtcbmltcG9ydCB7IENoYW5uZWxDb250ZW50U2NyaXB0IH0gZnJvbSBcIi4vY29tbW9uL2NoYW5uZWwtY29udGVudC1zY3JpcHRcIjtcblxuY29uc3QgY29udGVudFNjcmlwdFdlYnBhZ2VUb1JlcXVlc3RNYW5hZ2VyID0gbmV3IFdlYnBhZ2VUb0NvbnRlbnRTY3JpcHRSZXF1ZXN0TWFuYWdlcihcbiAgQ0hBTk5FTF9TT0xBTkFfV0VCUEFHRV9SRVFVRVNULFxuICBDSEFOTkVMX1NPTEFOQV9XRUJQQUdFX1JFU1BPTlNFXG4pO1xuXG5mdW5jdGlvbiBtYWluKCkge1xuICBpbmplY3RTY3JpcHQoXCJpbnBhZ2UuanNcIik7XG5cbiAgYWRkTGlzdGVuZXJzKCk7XG4gIGluaXRQcm94eSgpO1xufVxuXG4vLyBJbnNlcnRzIGEgPHNjcmlwdD4gdGFnIGludG8gdGhlIERPTS5cbmZ1bmN0aW9uIGluamVjdFNjcmlwdChzY3JpcHROYW1lOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgIHNjcmlwdC5zcmMgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoc2NyaXB0TmFtZSk7XG4gICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNjcmlwdC5yZW1vdmUoKTtcbiAgICB9O1xuICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwicHJvdmlkZXIgaW5qZWN0aW9uIGZhaWxlZC5cIiwgZXJyb3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVycygpIHtcbiAgV2VicGFnZVRvQ29udGVudFNjcmlwdFJlcXVlc3RNYW5hZ2VyLnN1YnNjcmliZVJlcXVlc3QoXG4gICAgQ0hBTk5FTF9TT0xBTkFfQ09OVEVOVF9TQ1JJUFRfUkVRVUVTVCxcbiAgICBoYW5kbGVTb2xhbmFDb250ZW50U2NyaXB0XG4gICk7XG5cbiAgY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGFzeW5jIChtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSkgPT4ge1xuICAgIGlmIChtZXNzYWdlLmNoYW5uZWwgPT09IENIQU5ORUxfQ09OVEVOVF9TQ1JJUFQpIHtcbiAgICAgIGlmIChtZXNzYWdlLmRhdGE/Lm5hbWUgPT09IEdFVF9EQVBQX0NPTk5FQ1RFRCkge1xuICAgICAgICBzZW5kUmVzcG9uc2UoYXdhaXQgZ2V0RGFwcENvbm5lY3RlZCgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXREYXBwQ29ubmVjdGVkKCkge1xuICByZXR1cm4gYXdhaXQgY29udGVudFNjcmlwdFdlYnBhZ2VUb1JlcXVlc3RNYW5hZ2VyLnJlcXVlc3Qoe1xuICAgIG1ldGhvZDogR0VUX0RBUFBfQ09OTkVDVEVELFxuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU29sYW5hQ29udGVudFNjcmlwdChyZXF1ZXN0RGV0YWlsOiBScGNSZXF1ZXN0KSB7XG4gIHN3aXRjaCAocmVxdWVzdERldGFpbC5tZXRob2QpIHtcbiAgICBjYXNlIEdFVF9FWFRFTlNJT05fSUQ6XG4gICAgICBXZWJwYWdlVG9Db250ZW50U2NyaXB0UmVxdWVzdE1hbmFnZXIuc2VuZFJlc3BvbnNlKENIQU5ORUxfU09MQU5BX0NPTlRFTlRfU0NSSVBUX1JFU1BPTlNFLCB7XG4gICAgICAgIGlkOiByZXF1ZXN0RGV0YWlsLmlkISxcbiAgICAgICAgcmVzdWx0OiBjaHJvbWUucnVudGltZS5pZCxcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRQcm94eSgpIHtcbiAgLy8gRm9yd2FyZCBhbGwgbm90aWZpY2F0aW9ucyBmcm9tIHRoZSBiYWNrZ3JvdW5kIHNjcmlwdCB0byB0aGUgaW5qZWN0ZWQgcGFnZS5cbiAgQ2hhbm5lbENvbnRlbnRTY3JpcHQucHJveHlSZXZlcnNlKENIQU5ORUxfU09MQU5BX05PVElGSUNBVElPTik7XG59XG5cbm1haW4oKTtcbiJdLAogICJtYXBwaW5ncyI6ICJtQkFjTyxJQUFNQSxFQUFZLENBQ3ZCLGlCQUFrQixtQkFDbEIsaUJBQWtCLG1CQUNsQixrQkFBbUIsb0JBQ25CLGFBQWMsY0FDaEIsRUFFYUMsRUFBaUIsQ0FDNUIsR0FBR0QsRUFDSCxRQUFTLFNB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QWEsTUFBTUcsRUFBaUIsQ0FBQyxDQUczQyxDQUFDLENBQ0gsQ0FFQSxlQUFlQSxHQUFtQixDQUNoQyxPQUFPLE1BQU1sQixFQUFxQyxRQUFRLENBQ3hELE9BQVFpQixDQUNWLENBQUMsQ0FDSCxDQUVBLFNBQVNMLEVBQTBCTyxFQUEyQixDQUM1RCxPQUFRQSxFQUFjLE9BQVEsQ0FDNUIsS0FBS0MsRUFDSG5CLEVBQXFDLGFBQWFvQixFQUF3QyxDQUN4RixHQUFJRixFQUFjLEdBQ2xCLE9BQVEsT0FBTyxRQUFRLEVBQ3pCLENBQUMsRUFDRCxNQUNGLFFBQ0UsS0FDSixDQUNGLENBRUEsU0FBU1osR0FBWSxDQUVuQmUsRUFBcUIsYUFBYUMsQ0FBMkIsQ0FDL0QsQ0FFQW5CLEVBQUsiLAogICJuYW1lcyI6IFsiUG9wdXBUeXBlIiwgIkNsb3NlUG9wdXBUeXBlIiwgIkNIQU5ORUxfU09MQU5BX0NPTlRFTlRfU0NSSVBUX1JFUVVFU1QiLCAiQ0hBTk5FTF9TT0xBTkFfQ09OVEVOVF9TQ1JJUFRfUkVTUE9OU0UiLCAiQ0hBTk5FTF9TT0xBTkFfV0VCUEFHRV9SRVFVRVNUIiwgIkNIQU5ORUxfU09MQU5BX1dFQlBBR0VfUkVTUE9OU0UiLCAiQ0hBTk5FTF9TT0xBTkFfTk9USUZJQ0FUSU9OIiwgIkNIQU5ORUxfQ09OVEVOVF9TQ1JJUFQiLCAiR0VUX0VYVEVOU0lPTl9JRCIsICJHRVRfREFQUF9DT05ORUNURUQiLCAiV2VicGFnZVRvQ29udGVudFNjcmlwdFJlcXVlc3RNYW5hZ2VyIiwgInJlcXVlc3RDaGFubmVsIiwgInJlc3BvbnNlQ2hhbm5lbCIsICJldmVudCIsICJpZCIsICJyZXN1bHQiLCAiZXJyb3IiLCAicmVzb2x2ZXIiLCAicmVzb2x2ZSIsICJyZWplY3QiLCAicmVxdWVzdElkIiwgInByb20iLCAiX3Jlc29sdmUiLCAiX3JlamVjdCIsICJtZXRob2QiLCAicGFyYW1zIiwgInByb21pc2UiLCAiZGV0YWlsIiwgImNiIiwgIkJyb3dzZXJSdW50aW1lIiwgImV4dGVuc2lvbklkIiwgIm9wdGlvbnMiLCAiY2IiLCAibXNnIiwgImxpc3RlbmVyIiwgInJlc29sdmUiLCAiaWQiLCAiQ2hhbm5lbENvbnRlbnRTY3JpcHQiLCAicmVxQ2hhbm5lbCIsICJyZXNwQ2hhbm5lbCIsICJldmVudCIsICJCcm93c2VyUnVudGltZSIsICJtZXNzYWdlIiwgIl9zZW5kZXIiLCAic2VuZFJlc3BvbnNlIiwgImNvbnRlbnRTY3JpcHRXZWJwYWdlVG9SZXF1ZXN0TWFuYWdlciIsICJXZWJwYWdlVG9Db250ZW50U2NyaXB0UmVxdWVzdE1hbmFnZXIiLCAiQ0hBTk5FTF9TT0xBTkFfV0VCUEFHRV9SRVFVRVNUIiwgIkNIQU5ORUxfU09MQU5BX1dFQlBBR0VfUkVTUE9OU0UiLCAibWFpbiIsICJpbmplY3RTY3JpcHQiLCAiYWRkTGlzdGVuZXJzIiwgImluaXRQcm94eSIsICJzY3JpcHROYW1lIiwgInNjcmlwdCIsICJlcnJvciIsICJDSEFOTkVMX1NPTEFOQV9DT05URU5UX1NDUklQVF9SRVFVRVNUIiwgImhhbmRsZVNvbGFuYUNvbnRlbnRTY3JpcHQiLCAibWVzc2FnZSIsICJzZW5kZXIiLCAic2VuZFJlc3BvbnNlIiwgIkNIQU5ORUxfQ09OVEVOVF9TQ1JJUFQiLCAiR0VUX0RBUFBfQ09OTkVDVEVEIiwgImdldERhcHBDb25uZWN0ZWQiLCAicmVxdWVzdERldGFpbCIsICJHRVRfRVhURU5TSU9OX0lEIiwgIkNIQU5ORUxfU09MQU5BX0NPTlRFTlRfU0NSSVBUX1JFU1BPTlNFIiwgIkNoYW5uZWxDb250ZW50U2NyaXB0IiwgIkNIQU5ORUxfU09MQU5BX05PVElGSUNBVElPTiJdCn0K
